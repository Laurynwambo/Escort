{"ast":null,"code":"import axios from \"axios\";\nimport { GLOBALTYPES } from \"./globalTypes\";\nimport { getDataAPI, deleteDataAPI } from \"../../utils/fetchData\";\nimport { createNotify } from \"./notifyAction\";\nexport const ADMIN_TYPES = {\n  GET_TOTAL_USERS: \"GET_TOTAL_USERS\",\n  USER_UPDATE: \"USER_UPDATE\",\n  USER_ADD: \"USER_ADD\",\n  SET_CURRENT_USER: \"SET_CURRENT_USER\",\n  USER_LOADING: \"USER_LOADING\",\n  GET_ERRORS: \"GET_ERRORS\",\n  LOADING_ADMIN: \"LOADING_ADMIN\",\n  DELETE_POST: \"DELETE_POST\"\n};\n/* export const addUser = (userData, history) => dispatch => {\r\n  axios\r\n      .post(\"/api/user-add\", userData)\r\n      .then(res =>\r\n          dispatch({\r\n              type: ADMIN_TYPES.USER_ADD,\r\n              payload: res,\r\n          })\r\n      ).catch(err =>\r\n      dispatch({\r\n          type: ADMIN_TYPES.GET_ERRORS,\r\n          payload: err.response.data\r\n      })\r\n  );\r\n}; */\n\nexport const updateUser = userData => dispatch => {\n  axios.post(\"/api/user-update\", userData).then(res => dispatch({\n    type: ADMIN_TYPES.USER_UPDATE,\n    payload: res\n  })).catch(err => dispatch({\n    type: ADMIN_TYPES.GET_ERRORS,\n    payload: err.response.data\n  }));\n};\nexport const getTotalUsers = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_total_users\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_TOTAL_USERS,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const addUser = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"/user-add\", token);\n    dispatch({\n      type: ADMIN_TYPES.USER_ADD,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getTotalPosts = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_total_posts\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_TOTAL_POSTS,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getTotalComments = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_total_comments\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_TOTAL_COMMENTS,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getTotalLikes = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_total_likes\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_TOTAL_LIKES,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getTotalSpamPosts = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_total_spam_posts\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_TOTAL_SPAM_POSTS,\n      payload: res.data\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const getSpamPosts = token => async dispatch => {\n  try {\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: true\n    });\n    const res = await getDataAPI(\"get_spam_posts\", token);\n    dispatch({\n      type: ADMIN_TYPES.GET_SPAM_POSTS,\n      payload: res.data.spamPosts\n    });\n    dispatch({\n      type: ADMIN_TYPES.LOADING_ADMIN,\n      payload: false\n    });\n  } catch (err) {\n    dispatch({\n      type: GLOBALTYPES.ALERT,\n      payload: {\n        error: err.response.data.msg\n      }\n    });\n  }\n};\nexport const deleteSpamPost = _ref => {\n  let {\n    post,\n    auth,\n    socket\n  } = _ref;\n  return async dispatch => {\n    dispatch({\n      type: ADMIN_TYPES.DELETE_POST,\n      payload: post\n    });\n\n    try {\n      const res = await deleteDataAPI(`delete_spam_posts/${post._id}`, auth.token);\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          success: res.data.msg\n        }\n      }); // todo notification\n\n      const msg = {\n        id: auth.user._id,\n        text: \"Your Post is deleted due to too many reports.\",\n        recipients: [post.user._id],\n        url: `/profile/${post.user._id}`\n      };\n      dispatch(createNotify({\n        msg,\n        auth,\n        socket\n      }));\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg\n        }\n      });\n    }\n  };\n};\nexport const getTotalActiveUsers = _ref2 => {\n  let {\n    auth,\n    socket\n  } = _ref2;\n  return async dispatch => {\n    try {\n      socket.emit('getActiveUsers', auth.user._id);\n    } catch (err) {\n      dispatch({\n        type: GLOBALTYPES.ALERT,\n        payload: {\n          error: err.response.data.msg\n        }\n      });\n    }\n  };\n};","map":{"version":3,"sources":["C:/Users/Laureen/Downloads/escort/client/src/redux/actions/adminAction.js"],"names":["axios","GLOBALTYPES","getDataAPI","deleteDataAPI","createNotify","ADMIN_TYPES","GET_TOTAL_USERS","USER_UPDATE","USER_ADD","SET_CURRENT_USER","USER_LOADING","GET_ERRORS","LOADING_ADMIN","DELETE_POST","updateUser","userData","dispatch","post","then","res","type","payload","catch","err","response","data","getTotalUsers","token","ALERT","error","msg","addUser","getTotalPosts","GET_TOTAL_POSTS","getTotalComments","GET_TOTAL_COMMENTS","getTotalLikes","GET_TOTAL_LIKES","getTotalSpamPosts","GET_TOTAL_SPAM_POSTS","getSpamPosts","GET_SPAM_POSTS","spamPosts","deleteSpamPost","auth","socket","_id","success","id","user","text","recipients","url","getTotalActiveUsers","emit"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { GLOBALTYPES } from \"./globalTypes\";\r\nimport { getDataAPI, deleteDataAPI } from \"../../utils/fetchData\";\r\nimport { createNotify } from \"./notifyAction\";\r\n\r\nexport const ADMIN_TYPES = {\r\n  GET_TOTAL_USERS: \"GET_TOTAL_USERS\",\r\n  USER_UPDATE: \"USER_UPDATE\",\r\n  USER_ADD: \"USER_ADD\",\r\n  SET_CURRENT_USER: \"SET_CURRENT_USER\",\r\n  USER_LOADING: \"USER_LOADING\",\r\n  GET_ERRORS: \"GET_ERRORS\",\r\n  LOADING_ADMIN: \"LOADING_ADMIN\",\r\n  DELETE_POST: \"DELETE_POST\",\r\n};\r\n\r\n/* export const addUser = (userData, history) => dispatch => {\r\n  axios\r\n      .post(\"/api/user-add\", userData)\r\n      .then(res =>\r\n          dispatch({\r\n              type: ADMIN_TYPES.USER_ADD,\r\n              payload: res,\r\n          })\r\n      ).catch(err =>\r\n      dispatch({\r\n          type: ADMIN_TYPES.GET_ERRORS,\r\n          payload: err.response.data\r\n      })\r\n  );\r\n}; */\r\n\r\n\r\nexport const updateUser = (userData) => dispatch => {\r\n  axios\r\n      .post(\"/api/user-update\", userData)\r\n      .then(res =>\r\n          dispatch({\r\n              type: ADMIN_TYPES.USER_UPDATE,\r\n              payload: res,\r\n          })\r\n      ).catch(err =>\r\n      dispatch({\r\n          type: ADMIN_TYPES.GET_ERRORS,\r\n          payload: err.response.data\r\n      })\r\n  );\r\n};\r\n\r\n\r\n\r\nexport const getTotalUsers = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_total_users\", token);\r\n    dispatch({ type: ADMIN_TYPES.GET_TOTAL_USERS, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const addUser = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"/user-add\", token);\r\n    dispatch({ type: ADMIN_TYPES.USER_ADD, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const getTotalPosts = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_total_posts\", token);\r\n    dispatch({ type: ADMIN_TYPES.GET_TOTAL_POSTS, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const getTotalComments = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_total_comments\", token);\r\n    dispatch({ type: ADMIN_TYPES.GET_TOTAL_COMMENTS, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const getTotalLikes = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_total_likes\", token);\r\n    dispatch({ type: ADMIN_TYPES.GET_TOTAL_LIKES, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getTotalSpamPosts = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_total_spam_posts\", token);\r\n    dispatch({ type: ADMIN_TYPES.GET_TOTAL_SPAM_POSTS, payload: res.data });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getSpamPosts = (token) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: true });\r\n    const res = await getDataAPI(\"get_spam_posts\", token);\r\n    \r\n    dispatch({ type: ADMIN_TYPES.GET_SPAM_POSTS, payload: res.data.spamPosts });\r\n\r\n    dispatch({ type: ADMIN_TYPES.LOADING_ADMIN, payload: false });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteSpamPost = ({ post, auth, socket }) => async (dispatch) => {\r\n  dispatch({ type: ADMIN_TYPES.DELETE_POST, payload: post });\r\n\r\n  try {\r\n    const res = await deleteDataAPI(\r\n      `delete_spam_posts/${post._id}`,\r\n      auth.token\r\n    );\r\n\r\n    dispatch({ type: GLOBALTYPES.ALERT, payload: { success: res.data.msg } });\r\n\r\n\r\n    // todo notification\r\n    const msg = {\r\n      id: auth.user._id,\r\n      text: \"Your Post is deleted due to too many reports.\",\r\n      recipients: [post.user._id],\r\n      url: `/profile/${post.user._id}`,\r\n    };\r\n\r\n    dispatch(createNotify({ msg, auth, socket }));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getTotalActiveUsers = ({auth, socket}) => async (dispatch) => {\r\n  try {\r\n    socket.emit('getActiveUsers', auth.user._id);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: {\r\n        error: err.response.data.msg,\r\n      },\r\n    });\r\n  }\r\n};"]},"metadata":{},"sourceType":"module"}