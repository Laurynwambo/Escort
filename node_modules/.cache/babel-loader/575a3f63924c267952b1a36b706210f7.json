{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Laureen\\\\Downloads\\\\escort\\\\client\\\\src\\\\components\\\\adminDashboard\\\\usersManagement\\\\index.js\";\n\n/* eslint-disable no-underscore-dangle */\nimport React, { Component } from 'react';\nimport { Table, Input, Button, notification, Modal } from 'antd';\nimport { SearchOutlined, ExclamationCircleOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { Helmet } from 'react-helmet';\nimport qs from 'qs';\nimport Moment from 'react-moment';\nimport axios from 'axios';\nimport \"./style.css\";\nimport CreateModal from './create';\nimport UpdateModal from './update';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst actionUrl = '/adminDashboard/usersManagement';\n\nclass users extends Component {\n  constructor() {\n    var _this;\n\n    super(...arguments);\n    _this = this;\n    this.state = {\n      data: [],\n      loading: false,\n      totalCount: 0,\n      pagination: {},\n      filters: {},\n      sorter: {},\n      addModalVisible: false,\n      addItemLoading: false,\n      updateModalVisible: false,\n      updateItemLoading: false,\n      initialValues: {\n        firstname: '',\n        middlename: '',\n        lastname: '',\n        username: '',\n        email: '',\n        idnumber: '',\n        mobile: '',\n        dateofbirth: '',\n        gender: ''\n      }\n    };\n\n    this.fetchData = async function () {\n      let pagination = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      let filters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      let sorter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      _this.setState({\n        loading: true,\n        pagination,\n        filters,\n        sorter\n      });\n\n      const {\n        current,\n        pageSize\n      } = pagination;\n      const {\n        field,\n        order\n      } = sorter;\n      const search = {};\n      Object.keys(filters).forEach(key => {\n        if (filters[key]) {\n          const [value] = filters[key];\n          search[key] = value;\n        }\n      });\n      const query = {\n        page: current,\n        perPage: pageSize,\n        sort: field ? {\n          [field]: order === 'ascend' ? 'ASC' : 'DESC'\n        } : {},\n        search\n      };\n      const queryString = qs.stringify(query);\n      const response = await axios.get(`${actionUrl}?${queryString}`);\n\n      if (!response) {\n        _this.setState({\n          loading: false\n        });\n\n        return;\n      }\n\n      const {\n        data,\n        totalCount\n      } = response.data;\n\n      _this.setState({\n        loading: false,\n        data,\n        totalCount\n      });\n    };\n\n    this.getColumnSearchProps = dataIndex => ({\n      filterDropdown: _ref => {\n        let {\n          setSelectedKeys,\n          selectedKeys,\n          confirm,\n          clearFilters\n        } = _ref;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            ref: node => {\n              this.searchInput = node;\n            },\n            placeholder: `Search ${dataIndex}`,\n            value: selectedKeys[0],\n            onChange: e => setSelectedKeys(e.target.value ? [e.target.value] : []),\n            onPressEnter: () => this.handleSearch(selectedKeys, confirm),\n            style: {\n              width: 188,\n              marginBottom: 8,\n              display: 'block'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            onClick: () => this.handleSearch(selectedKeys, confirm),\n            icon: /*#__PURE__*/_jsxDEV(SearchOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this),\n            size: \"small\",\n            style: {\n              width: 90,\n              marginRight: 8\n            },\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => this.handleReset(clearFilters),\n            size: \"small\",\n            style: {\n              width: 90\n            },\n            children: \"Reset\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 7\n        }, this);\n      },\n      filterIcon: filtered => /*#__PURE__*/_jsxDEV(SearchOutlined, {\n        style: {\n          color: filtered ? '#1890ff' : undefined\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }, this),\n      onFilter: () => true,\n      onFilterDropdownVisibleChange: visible => {\n        if (visible) {\n          setTimeout(() => this.searchInput.select());\n        }\n      }\n    });\n\n    this.handleSearch = (selectedKeys, confirm) => {\n      confirm();\n    };\n\n    this.handleReset = clearFilters => {\n      clearFilters();\n    };\n\n    this.showAddModal = () => this.setState({\n      addModalVisible: true\n    });\n\n    this.cancelAddModal = () => this.setState({\n      addModalVisible: false\n    });\n\n    this.addItem = async (values, form) => {\n      this.setState({\n        addItemLoading: true\n      });\n      const response = await axios.post(`${actionUrl}`, { ...values\n      });\n\n      if (!response) {\n        this.setState({\n          addItemLoading: false\n        });\n        return;\n      }\n\n      const {\n        status,\n        errorFields\n      } = response;\n\n      if (status === 422) {\n        form.setFields(errorFields);\n        this.setState({\n          addItemLoading: false\n        });\n      } else {\n        notification.success({\n          message: 'Success',\n          description: 'User added successfully.'\n        });\n        this.setState({\n          addItemLoading: false,\n          addModalVisible: false\n        });\n        form.resetFields();\n        this.fetchData({}, {}, {\n          field: 'createdAt',\n          order: 'descend'\n        });\n      }\n    };\n\n    this.showUpdateModal = async id => {\n      this.setState({\n        updateModalVisible: true,\n        updateItemLoading: true\n      });\n      const response = await axios.get(`${actionUrl}/${id}`);\n\n      if (!response) {\n        this.setState({\n          updateItemLoading: false,\n          updateModalVisible: false\n        });\n        return;\n      }\n\n      const {\n        data\n      } = response;\n      this.setState({\n        initialValues: { ...data\n        },\n        updateItemLoading: false\n      });\n    };\n\n    this.cancelUpdateModal = () => this.setState({\n      updateModalVisible: false\n    });\n\n    this.updateItem = async (values, form) => {\n      const {\n        initialValues,\n        pagination,\n        filters,\n        sorter\n      } = this.state;\n      this.setState({\n        updateItemLoading: true\n      });\n      const response = await axios.put(`${actionUrl}/${initialValues.id}`, { ...values\n      });\n\n      if (!response) {\n        this.setState({\n          updateItemLoading: false\n        });\n        return;\n      }\n\n      const {\n        status,\n        errorFields\n      } = response;\n\n      if (status === 422) {\n        form.setFields(errorFields);\n        this.setState({\n          updateItemLoading: false\n        });\n      } else {\n        notification.success({\n          message: 'Success',\n          description: 'User updated successfully.'\n        });\n        this.setState({\n          updateItemLoading: true,\n          updateModalVisible: false\n        });\n        this.fetchData(pagination, filters, sorter);\n      }\n    };\n\n    this.deleteItem = (id, itemName) => {\n      const {\n        pagination,\n        filters,\n        sorter\n      } = this.state;\n      const {\n        confirm\n      } = Modal;\n      confirm({\n        title: 'Are you sure you want to delete this user?',\n        content: `Category Name: ${itemName}`,\n        okText: 'Yes',\n        cancelText: 'No',\n        icon: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this),\n        onOk: async () => {\n          const response = await axios.delete(`${actionUrl}/${id}`);\n\n          if (response) {\n            notification.success({\n              message: 'Success',\n              description: 'User deleted successfully.'\n            });\n            this.fetchData(pagination, filters, sorter);\n          }\n        },\n\n        onCancel() {}\n\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  render() {\n    const columns = [{\n      title: 'firstname',\n      dataIndex: 'firstname',\n      key: 'firstname',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('firstname')\n    }, {\n      title: 'middlename',\n      dataIndex: 'middlename',\n      key: 'middlename',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('middlename')\n    }, {\n      title: 'lastname',\n      dataIndex: 'lastname',\n      key: 'lastname',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('lastname')\n    }, {\n      title: 'username',\n      dataIndex: 'username',\n      key: 'username',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('username')\n    }, {\n      title: 'email',\n      dataIndex: 'email',\n      key: 'email',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('email')\n    }, {\n      title: 'idnumber',\n      dataIndex: 'idnumber',\n      key: 'idnumber',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('idnumber')\n    }, {\n      title: 'mobile',\n      dataIndex: 'mobile',\n      key: 'mobile',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('mobile')\n    }, {\n      title: 'dateofbirth',\n      dataIndex: 'dateofbirth',\n      key: 'dateofbirth',\n      sorter: () => {},\n      render: text => text.length > 30 ? `${text.substring(0, 30)}...` : text,\n      ...this.getColumnSearchProps('dateofbirth')\n    }, {\n      title: 'Created At',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n      render: val => {\n        return /*#__PURE__*/_jsxDEV(Moment, {\n          format: \"D MMM YYYY, hh:mm A\",\n          children: val\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 18\n        }, this);\n      },\n      sorter: () => {}\n    }, {\n      title: 'Action',\n      key: 'action',\n      render: record => /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#/\",\n          onClick: e => {\n            e.preventDefault();\n            this.showUpdateModal(record.id);\n          },\n          className: \"btn btn-sm btn-light mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fe fe-edit mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this), \"Update\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#/\",\n          onClick: e => {\n            e.preventDefault();\n            this.deleteItem(record.id, record.name);\n          },\n          className: \"btn btn-sm btn-light text-danger\",\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fe fe-trash mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), \"Delete\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this)\n    }];\n    const {\n      data,\n      loading,\n      totalCount,\n      addModalVisible,\n      addItemLoading,\n      updateModalVisible,\n      updateItemLoading,\n      initialValues\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        title: \"Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header card-header-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column justify-content-center mr-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-0\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              className: \"\",\n              type: \"primary\",\n              href: \"#\",\n              onClick: e => {\n                e.preventDefault();\n                this.showAddModal();\n              },\n              children: \"Add User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-light ml-2\",\n              href: \"#\",\n              icon: /*#__PURE__*/_jsxDEV(ReloadOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 23\n              }, this),\n              onClick: e => {\n                e.preventDefault();\n                this.fetchData();\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-nowrap kit__utils__table\",\n            children: /*#__PURE__*/_jsxDEV(Table, {\n              rowKey: record => record.id,\n              columns: columns,\n              dataSource: data,\n              onChange: this.fetchData,\n              loading: loading,\n              pagination: {\n                total: totalCount\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CreateModal, {\n        addModalVisible: addModalVisible,\n        addItem: this.addItem,\n        cancelAddModal: this.cancelAddModal,\n        addItemLoading: addItemLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UpdateModal, {\n        updateModalVisible: updateModalVisible,\n        updateItem: this.updateItem,\n        cancelUpdateModal: this.cancelUpdateModal,\n        updateItemLoading: updateItemLoading,\n        initialValues: initialValues\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default users;","map":{"version":3,"sources":["C:/Users/Laureen/Downloads/escort/client/src/components/adminDashboard/usersManagement/index.js"],"names":["React","Component","Table","Input","Button","notification","Modal","SearchOutlined","ExclamationCircleOutlined","ReloadOutlined","Helmet","qs","Moment","axios","CreateModal","UpdateModal","actionUrl","users","state","data","loading","totalCount","pagination","filters","sorter","addModalVisible","addItemLoading","updateModalVisible","updateItemLoading","initialValues","firstname","middlename","lastname","username","email","idnumber","mobile","dateofbirth","gender","fetchData","setState","current","pageSize","field","order","search","Object","keys","forEach","key","value","query","page","perPage","sort","queryString","stringify","response","get","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","searchInput","e","target","handleSearch","width","marginBottom","display","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","onFilterDropdownVisibleChange","visible","setTimeout","select","showAddModal","cancelAddModal","addItem","values","form","post","status","errorFields","setFields","success","message","description","resetFields","showUpdateModal","id","cancelUpdateModal","updateItem","put","deleteItem","itemName","title","content","okText","cancelText","icon","onOk","delete","onCancel","componentDidMount","render","columns","text","length","substring","val","record","preventDefault","name","total"],"mappings":"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","sourcesContent":["/* eslint-disable no-underscore-dangle */\r\nimport React, { Component } from 'react'\r\nimport { Table, Input, Button, notification, Modal } from 'antd'\r\nimport { SearchOutlined, ExclamationCircleOutlined, ReloadOutlined } from '@ant-design/icons'\r\nimport { Helmet } from 'react-helmet'\r\nimport qs from 'qs'\r\nimport Moment from 'react-moment'\r\nimport axios from 'axios'\r\nimport \"./style.css\";\r\n\r\nimport CreateModal from './create'\r\nimport UpdateModal from './update'\r\n\r\nconst actionUrl = '/adminDashboard/usersManagement'\r\n\r\nclass users extends Component {\r\n  state = {\r\n    data: [],\r\n    loading: false,\r\n    totalCount: 0,\r\n    pagination: {},\r\n    filters: {},\r\n    sorter: {},\r\n    addModalVisible: false,\r\n    addItemLoading: false,\r\n    updateModalVisible: false,\r\n    updateItemLoading: false,\r\n    initialValues: {\r\n        firstname: '',\r\n        middlename: '',\r\n        lastname: '',\r\n        username: '',\r\n        email: '',\r\n        idnumber: '',\r\n        mobile: '',\r\n        dateofbirth: '',\r\n        gender: '',\r\n    },\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData()\r\n  }\r\n\r\n  fetchData = async (pagination = {}, filters = {}, sorter = {}) => {\r\n    this.setState({ loading: true, pagination, filters, sorter })\r\n    const { current, pageSize } = pagination\r\n    const { field, order } = sorter\r\n    const search = {}\r\n    Object.keys(filters).forEach(key => {\r\n      if (filters[key]) {\r\n        const [value] = filters[key]\r\n        search[key] = value\r\n      }\r\n    })\r\n\r\n    const query = {\r\n      page: current,\r\n      perPage: pageSize,\r\n      sort: field\r\n        ? {\r\n            [field]: order === 'ascend' ? 'ASC' : 'DESC',\r\n          }\r\n        : {},\r\n      search,\r\n    }\r\n    const queryString = qs.stringify(query)\r\n    const response = await axios.get(`${actionUrl}?${queryString}`)\r\n    if (!response) {\r\n      this.setState({ loading: false })\r\n      return\r\n    }\r\n    const { data, totalCount } = response.data\r\n    this.setState({ loading: false, data, totalCount })\r\n  }\r\n\r\n  getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={node => {\r\n            this.searchInput = node\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm)}\r\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.handleSearch(selectedKeys, confirm)}\r\n          icon={<SearchOutlined />}\r\n          size=\"small\"\r\n          style={{ width: 90, marginRight: 8 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n    onFilter: () => true,\r\n    onFilterDropdownVisibleChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => this.searchInput.select())\r\n      }\r\n    },\r\n  })\r\n\r\n  handleSearch = (selectedKeys, confirm) => {\r\n    confirm()\r\n  }\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters()\r\n  }\r\n\r\n  showAddModal = () => this.setState({ addModalVisible: true })\r\n\r\n  cancelAddModal = () => this.setState({ addModalVisible: false })\r\n\r\n  addItem = async (values, form) => {\r\n    this.setState({\r\n      addItemLoading: true,\r\n    })\r\n\r\n    const response = await axios.post(`${actionUrl}`, { ...values })\r\n\r\n    if (!response) {\r\n      this.setState({ addItemLoading: false })\r\n      return\r\n    }\r\n\r\n    const { status, errorFields } = response\r\n\r\n    if (status === 422) {\r\n      form.setFields(errorFields)\r\n      this.setState({\r\n        addItemLoading: false,\r\n      })\r\n    } else {\r\n      notification.success({\r\n        message: 'Success',\r\n        description: 'User added successfully.',\r\n      })\r\n      this.setState({\r\n        addItemLoading: false,\r\n        addModalVisible: false,\r\n      })\r\n\r\n      form.resetFields()\r\n      this.fetchData({}, {}, { field: 'createdAt', order: 'descend' })\r\n    }\r\n  }\r\n\r\n  showUpdateModal = async id => {\r\n    this.setState({ updateModalVisible: true, updateItemLoading: true })\r\n\r\n    const response = await axios.get(`${actionUrl}/${id}`)\r\n    if (!response) {\r\n      this.setState({\r\n        updateItemLoading: false,\r\n        updateModalVisible: false,\r\n      })\r\n      return\r\n    }\r\n    const { data } = response\r\n    this.setState({\r\n      initialValues: { ...data },\r\n      updateItemLoading: false,\r\n    })\r\n  }\r\n\r\n  cancelUpdateModal = () => this.setState({ updateModalVisible: false })\r\n\r\n  updateItem = async (values, form) => {\r\n    const { initialValues, pagination, filters, sorter } = this.state\r\n\r\n    this.setState({\r\n      updateItemLoading: true,\r\n    })\r\n\r\n    const response = await axios.put(`${actionUrl}/${initialValues.id}`, { ...values })\r\n\r\n    if (!response) {\r\n      this.setState({ updateItemLoading: false })\r\n      return\r\n    }\r\n\r\n    const { status, errorFields } = response\r\n\r\n    if (status === 422) {\r\n      form.setFields(errorFields)\r\n      this.setState({\r\n        updateItemLoading: false,\r\n      })\r\n    } else {\r\n      notification.success({\r\n        message: 'Success',\r\n        description: 'User updated successfully.',\r\n      })\r\n      this.setState({\r\n        updateItemLoading: true,\r\n        updateModalVisible: false,\r\n      })\r\n      this.fetchData(pagination, filters, sorter)\r\n    }\r\n  }\r\n\r\n  deleteItem = (id, itemName) => {\r\n    const { pagination, filters, sorter } = this.state\r\n    const { confirm } = Modal\r\n    confirm({\r\n      title: 'Are you sure you want to delete this user?',\r\n      content: `Category Name: ${itemName}`,\r\n      okText: 'Yes',\r\n      cancelText: 'No',\r\n      icon: <ExclamationCircleOutlined />,\r\n      onOk: async () => {\r\n        const response = await axios.delete(`${actionUrl}/${id}`)\r\n        if (response) {\r\n          notification.success({\r\n            message: 'Success',\r\n            description: 'User deleted successfully.',\r\n          })\r\n          this.fetchData(pagination, filters, sorter)\r\n        }\r\n      },\r\n      onCancel() {},\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: 'firstname',\r\n        dataIndex: 'firstname',\r\n        key: 'firstname',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('firstname'),\r\n      },\r\n      {\r\n        title: 'middlename',\r\n        dataIndex: 'middlename',\r\n        key: 'middlename',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('middlename'),\r\n      },\r\n      {\r\n        title: 'lastname',\r\n        dataIndex: 'lastname',\r\n        key: 'lastname',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('lastname'),\r\n      },\r\n      {\r\n        title: 'username',\r\n        dataIndex: 'username',\r\n        key: 'username',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('username'),\r\n      },\r\n      {\r\n        title: 'email',\r\n        dataIndex: 'email',\r\n        key: 'email',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('email'),\r\n      },\r\n      {\r\n        title: 'idnumber',\r\n        dataIndex: 'idnumber',\r\n        key: 'idnumber',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('idnumber'),\r\n      },\r\n      {\r\n        title: 'mobile',\r\n        dataIndex: 'mobile',\r\n        key: 'mobile',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('mobile'),\r\n      },\r\n      {\r\n        title: 'dateofbirth',\r\n        dataIndex: 'dateofbirth',\r\n        key: 'dateofbirth',\r\n        sorter: () => {},\r\n        render: text => (text.length > 30 ? `${text.substring(0, 30)}...` : text),\r\n        ...this.getColumnSearchProps('dateofbirth'),\r\n      },\r\n\r\n      {\r\n        title: 'Created At',\r\n        dataIndex: 'createdAt',\r\n        key: 'createdAt',\r\n        render: val => {\r\n          return <Moment format=\"D MMM YYYY, hh:mm A\">{val}</Moment>\r\n        },\r\n        sorter: () => {},\r\n      },\r\n\r\n      {\r\n        title: 'Action',\r\n        key: 'action',\r\n        render: record => (\r\n          <span>\r\n            <a\r\n              href=\"#/\"\r\n              onClick={e => {\r\n                e.preventDefault()\r\n                this.showUpdateModal(record.id)\r\n              }}\r\n              className=\"btn btn-sm btn-light mr-2\"\r\n            >\r\n              <i className=\"fe fe-edit mr-2\" />\r\n              Update\r\n            </a>\r\n            <a\r\n              href=\"#/\"\r\n              onClick={e => {\r\n                e.preventDefault()\r\n                this.deleteItem(record.id, record.name)\r\n              }}\r\n              className=\"btn btn-sm btn-light text-danger\"\r\n            >\r\n              <small>\r\n                <i className=\"fe fe-trash mr-2\" />\r\n              </small>\r\n              Delete\r\n            </a>\r\n          </span>\r\n        ),\r\n      },\r\n    ]\r\n    const {\r\n      data,\r\n      loading,\r\n      totalCount,\r\n      addModalVisible,\r\n      addItemLoading,\r\n      updateModalVisible,\r\n      updateItemLoading,\r\n      initialValues,\r\n    } = this.state\r\n\r\n    return (\r\n      <div>\r\n        <Helmet title=\"Users\" />\r\n\r\n        <div className=\"card\">\r\n          <div className=\"card-header card-header-flex\">\r\n            <div className=\"d-flex flex-column justify-content-center mr-auto\">\r\n              <h5 className=\"mb-0\">\r\n                <strong>Users</strong>\r\n              </h5>\r\n            </div>\r\n            <div className=\"d-flex align-items-center\">\r\n              <Button\r\n                className=\"\"\r\n                type=\"primary\"\r\n                href=\"#\"\r\n                onClick={e => {\r\n                  e.preventDefault()\r\n                  this.showAddModal()\r\n                }}\r\n              >\r\n                Add User\r\n              </Button>\r\n              <Button\r\n                className=\"btn-light ml-2\"\r\n                href=\"#\"\r\n                icon={<ReloadOutlined />}\r\n                onClick={e => {\r\n                  e.preventDefault()\r\n                  this.fetchData()\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"text-nowrap kit__utils__table\">\r\n              <Table\r\n                rowKey={record => record.id}\r\n                columns={columns}\r\n                dataSource={data}\r\n                onChange={this.fetchData}\r\n                loading={loading}\r\n                pagination={{\r\n                  total: totalCount,\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <CreateModal\r\n          addModalVisible={addModalVisible}\r\n          addItem={this.addItem}\r\n          cancelAddModal={this.cancelAddModal}\r\n          addItemLoading={addItemLoading}\r\n        />\r\n        <UpdateModal\r\n          updateModalVisible={updateModalVisible}\r\n          updateItem={this.updateItem}\r\n          cancelUpdateModal={this.cancelUpdateModal}\r\n          updateItemLoading={updateItemLoading}\r\n          initialValues={initialValues}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default users\r\n"]},"metadata":{},"sourceType":"module"}