{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Laureen\\\\Downloads\\\\escort\\\\client\\\\src\\\\components\\\\adminDashboard\\\\usersManagement\\\\UsersManagement.js\";\nimport React, { Component, Fragment } from \"react\"; // import Navbar from \"../navbar\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faList } from \"@fortawesome/free-solid-svg-icons/faList\";\nimport ReactDatatable from '@ashvin27/react-datatable';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport UserAddModal from \"../usersManagement/userAddModal\";\nimport UserUpdateModal from \"../usersManagement/userUpdateModal\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass UsersManagement extends Component {\n  constructor(props) {\n    super(props);\n    this.columns = [{\n      key: \"_id\",\n      text: \"Id\",\n      className: \"id\",\n      align: \"center\",\n      width: \"5px\",\n      height: \".5px\",\n      sortable: true\n    }, {\n      key: \"firstname\",\n      text: \"FirstName\",\n      className: \"firstname\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"middlename\",\n      text: \"MiddleName\",\n      className: \"middlename\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"lastname\",\n      text: \"LastName\",\n      className: \"lastname\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"username\",\n      text: \"UserName\",\n      className: \"username\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"email\",\n      text: \"Email\",\n      className: \"email\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"idnumber\",\n      text: \"IdNumber\",\n      className: \"idnumber\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"mobile\",\n      text: \"Mobile\",\n      className: \"mobile\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"dateofbirth\",\n      text: \"DateOfBirth\",\n      className: \"dateofbirth\",\n      align: \"center\",\n      sortable: true\n    }, {\n      key: \"action\",\n      text: \"Action\",\n      className: \"action\",\n      width: 50,\n      align: \"center\",\n      sortable: false,\n      cell: record => {\n        return /*#__PURE__*/_jsxDEV(Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            \"data-bs-toggle\": \"modal\",\n            \"data-bs-target\": \"#update-user-modal\",\n            className: \"btn btn-primary btn-sm\",\n            onClick: () => this.editRecord(record),\n            style: {\n              marginRight: '0.5px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 33\n            }, void 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, void 0), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger btn-sm\",\n            onClick: () => this.deleteRecord(record),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-trash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 33\n            }, void 0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, void 0)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, void 0);\n      }\n    }];\n    this.config = {\n      page_size: 10,\n      length_menu: [10, 20, 50],\n      filename: \"Users\",\n      no_data_text: 'No user found!',\n      language: {\n        length_menu: \"Show _MENU_ result per page\",\n        filter: \"Filter in records...\",\n        info: \"Showing _START_ to _END_ of _TOTAL_ records\",\n        pagination: {\n          first: \"First\",\n          previous: \"Previous\",\n          next: \"Next\",\n          last: \"Last\"\n        }\n      },\n      // show_length_menu: true,\n      show_filter: true,\n      show_pagination: true,\n      show_info: true\n    };\n    this.state = {\n      records: []\n    };\n    this.state = {\n      currentRecord: {\n        id: '',\n        firstname: '',\n        middlename: '',\n        lastname: '',\n        username: '',\n        email: '',\n        idnumber: '',\n        mobile: '',\n        dateofbirth: '',\n        password: '',\n        password2: ''\n      }\n    };\n    this.getData = this.getData.bind(this);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.getData();\n  }\n\n  getData() {\n    axios.post(\"/api/user-data\").then(res => {\n      this.setState({\n        records: res.data\n      });\n    }).catch();\n  }\n\n  editRecord(record) {\n    this.setState({\n      currentRecord: record\n    });\n  }\n\n  deleteRecord(record) {\n    axios.post(\"/api/user-delete\", {\n      _id: record._id\n    }).then(res => {\n      if (res.status === 200) {\n        toast(res.data.message, {\n          position: toast.POSITION.TOP_CENTER\n        });\n      }\n    }).catch();\n    this.getData();\n  }\n\n  pageChange(pageData) {\n    console.log(\"OnPageChange\", pageData);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        id: \"wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(UserAddModal, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(UserUpdateModal, {\n          record: this.state.currentRecord\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"page-content-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-fluid\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-link mt-3\",\n              id: \"menu-toggle\",\n              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faList\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 80\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-outline-primary float-right mt-3 mr-2\",\n              \"data-bs-toggle\": \"modal\",\n              \"data-bs-target\": \"#add-user-modal\",\n              onClick: this.addUser,\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faPlus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 174\n              }, this), \" Add User\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"mt-2 text-primary\",\n              children: \"Users List\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(ReactDatatable, {\n              config: this.config,\n              records: this.state.records,\n              columns: this.columns,\n              onPageChange: this.pageChange.bind(this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nUsersManagement.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  records: state.records\n});\n\nexport default connect(mapStateToProps)(UsersManagement);","map":{"version":3,"sources":["C:/Users/Laureen/Downloads/escort/client/src/components/adminDashboard/usersManagement/UsersManagement.js"],"names":["React","Component","Fragment","FontAwesomeIcon","faList","ReactDatatable","PropTypes","connect","axios","faPlus","UserAddModal","UserUpdateModal","toast","ToastContainer","UsersManagement","constructor","props","columns","key","text","className","align","width","height","sortable","cell","record","editRecord","marginRight","deleteRecord","config","page_size","length_menu","filename","no_data_text","language","filter","info","pagination","first","previous","next","last","show_filter","show_pagination","show_info","state","records","currentRecord","id","firstname","middlename","lastname","username","email","idnumber","mobile","dateofbirth","password","password2","getData","bind","componentDidMount","componentWillReceiveProps","nextProps","post","then","res","setState","data","catch","_id","status","message","position","POSITION","TOP_CENTER","pageChange","pageData","console","log","render","addUser","propTypes","auth","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\r\n// import Navbar from \"../navbar\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faList} from \"@fortawesome/free-solid-svg-icons/faList\";\r\nimport ReactDatatable from '@ashvin27/react-datatable';\r\nimport PropTypes from \"prop-types\";\r\nimport {connect} from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport {faPlus} from \"@fortawesome/free-solid-svg-icons\";\r\nimport UserAddModal from \"../usersManagement/userAddModal\";\r\nimport UserUpdateModal from \"../usersManagement/userUpdateModal\";\r\n\r\nimport { toast, ToastContainer} from \"react-toastify\";\r\n\r\nclass UsersManagement extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.columns = [\r\n            {\r\n                key: \"_id\",\r\n                text: \"Id\",\r\n                className: \"id\",\r\n                align: \"center\",\r\n                width: \"5px\",\r\n                height: \".5px\",\r\n                sortable: true,\r\n\r\n            },\r\n            {\r\n                key: \"firstname\",\r\n                text: \"FirstName\",\r\n                className: \"firstname\",\r\n                align: \"center\",\r\n                sortable: true,\r\n            },\r\n            {\r\n              key: \"middlename\",\r\n              text: \"MiddleName\",\r\n              className: \"middlename\",\r\n              align: \"center\",\r\n              sortable: true,\r\n           },\r\n           {\r\n            key: \"lastname\",\r\n            text: \"LastName\",\r\n            className: \"lastname\",\r\n            align: \"center\",\r\n            sortable: true,\r\n            },\r\n            {\r\n              key: \"username\",\r\n              text: \"UserName\",\r\n              className: \"username\",\r\n              align: \"center\",\r\n              sortable: true,\r\n            },\r\n            {\r\n                key: \"email\",\r\n                text: \"Email\",\r\n                className: \"email\",\r\n                align: \"center\",\r\n                sortable: true\r\n            },\r\n            {\r\n              key: \"idnumber\",\r\n              text: \"IdNumber\",\r\n              className: \"idnumber\",\r\n              align: \"center\",\r\n              sortable: true,\r\n            },\r\n            {\r\n              key: \"mobile\",\r\n              text: \"Mobile\",\r\n              className: \"mobile\",\r\n              align: \"center\",\r\n              sortable: true,\r\n            },\r\n            {\r\n                key: \"dateofbirth\",\r\n                text: \"DateOfBirth\",\r\n                className: \"dateofbirth\",\r\n                align: \"center\",\r\n                sortable: true\r\n            },\r\n            {\r\n                key: \"action\",\r\n                text: \"Action\",\r\n                className: \"action\",\r\n                width: 50,\r\n                align: \"center\",\r\n                sortable: false,\r\n                cell: record => {\r\n                    return (\r\n                        <Fragment>\r\n                            <button\r\n                                data-bs-toggle=\"modal\"\r\n                                data-bs-target=\"#update-user-modal\"\r\n                                className=\"btn btn-primary btn-sm\"\r\n                                onClick={() => this.editRecord(record)}\r\n                                style={{marginRight: '0.5px'}}>\r\n                                <i className=\"fa fa-edit\"></i>\r\n                            </button>\r\n                            <button\r\n                                className=\"btn btn-danger btn-sm\"\r\n                                onClick={() => this.deleteRecord(record)}>\r\n                                <i className=\"fa fa-trash\"></i>\r\n                            </button>\r\n                        </Fragment>\r\n                    );\r\n                }\r\n            }\r\n        ];\r\n\r\n        this.config = {\r\n            page_size: 10,\r\n            length_menu: [ 10, 20, 50 ],\r\n            filename: \"Users\",\r\n            no_data_text: 'No user found!',\r\n            language: {\r\n                length_menu: \"Show _MENU_ result per page\",\r\n                filter: \"Filter in records...\",\r\n                info: \"Showing _START_ to _END_ of _TOTAL_ records\",\r\n                pagination: {\r\n                    first: \"First\",\r\n                    previous: \"Previous\",\r\n                    next: \"Next\",\r\n                    last: \"Last\"\r\n                }\r\n            },\r\n            // show_length_menu: true,\r\n            show_filter: true,\r\n            show_pagination: true,\r\n            show_info: true,\r\n        };\r\n\r\n        this.state = {\r\n            records: []\r\n        };\r\n\r\n        this.state = {\r\n            currentRecord: {\r\n                id: '',\r\n                firstname: '',\r\n                middlename: '',\r\n                lastname: '',\r\n                username: '',\r\n                email: '',\r\n                idnumber: '',\r\n                mobile: '',\r\n                dateofbirth: '',\r\n                password: '',\r\n                password2: '',\r\n\r\n            }\r\n        };\r\n\r\n        this.getData = this.getData.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData()\r\n    };\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        this.getData()\r\n    }\r\n\r\n    getData() {\r\n        axios\r\n            .post(\"/api/user-data\")\r\n            .then(res => {\r\n                this.setState({ records: res.data})\r\n            })\r\n            .catch()\r\n    }\r\n\r\n    editRecord(record) {\r\n        this.setState({ currentRecord: record})\r\n        \r\n        \r\n    }\r\n   \r\n\r\n    deleteRecord(record) {\r\n        axios\r\n            .post(\"/api/user-delete\", {_id: record._id})\r\n            .then(res => {\r\n                if (res.status === 200) {\r\n                   toast(res.data.message, {\r\n                       position: toast.POSITION.TOP_CENTER,\r\n                   })\r\n                }\r\n            })\r\n            .catch();\r\n        this.getData();\r\n    }\r\n\r\n    pageChange(pageData) {\r\n        console.log(\"OnPageChange\", pageData);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n                <div className=\"d-flex\" id=\"wrapper\">\r\n                    <UserAddModal/>\r\n                    <UserUpdateModal record={this.state.currentRecord}/>\r\n                    <div id=\"page-content-wrapper\">\r\n                        <div className=\"container-fluid\">\r\n                        <button className=\"btn btn-link mt-3\" id=\"menu-toggle\"><FontAwesomeIcon icon={faList}/></button>\r\n                            <button className=\"btn btn-outline-primary float-right mt-3 mr-2\" data-bs-toggle=\"modal\" data-bs-target=\"#add-user-modal\" onClick={this.addUser}><FontAwesomeIcon icon={faPlus}/> Add User</button>\r\n                            <h1 className=\"mt-2 text-primary\">Users List</h1>\r\n                            <ReactDatatable\r\n                                config={this.config}\r\n                                records={this.state.records}\r\n                                columns={this.columns}\r\n                                onPageChange={this.pageChange.bind(this)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <ToastContainer/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nUsersManagement.propTypes = {\r\n    auth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    auth: state.auth,\r\n    records: state.records\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps\r\n)(UsersManagement);\r\n"]},"metadata":{},"sourceType":"module"}